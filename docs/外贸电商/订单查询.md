# 查询即刻订舱产品的订单信息


# 1. 订单查询

根据条件分页查询符合条件的订单简要信息

## 1.1 地址和方法


- **路径**： "/service/synconhub/product/instantBooking/search"
- **方法**：POST

## 1.2 请求参数

|     字段名     |  类型   | 是否必须 |      说明      |                  备注                  |
| :------------: | :-----: | :------: | :------------: | :------------------------------------: |
|      brNo      | string  |  非必须  |     订舱号     |                                        |
|    orderNo     | string  |  非必须  |     订单号     |                                        |
|  orderStatus   | string  |  非必须  |    订单状态    | **枚举:** REVIEWING,CONFIRMED,CANCELED |
|      page      | integer |   必须   |      页数      |             **最小值:** 1              |
|      size      | integer |   必须   |      条数      |     **最小值:** 1，**最大值:** 50      |
| updateDateFrom | string  |  非必须  | 订单更新时间从 |              ISODate类型               |
|  updateDateTo  | string  |  非必须  | 订单更新时间至 |              ISODate类型               |

## 1.3 请求样例

```javascript
{
  "brNo": "6889903730",
  "orderNo": "E00007231",
  "orderStatus": "CONFIRMED",
  "page": 1,
  "size": 20,
  "updateDateFrom": "2020-07-20T03:14:55.200Z",
  "updateDateTo": "2020-07-25T03:14:55.200Z"
}
```

## 1.4 响应参数

| 字段名  | 含义                       |
| ------- | -------------------------- |
| code    | 状态码                     |
| message | 提示信息                   |
| data    | 分页返回符合条件的订单信息 |

## 1.5 响应字段说明

```java
{
    "code": 0,
    "message": "",
    "data": {
        "content": [ // 分页查询的订单信息
            {
                "orderId": "297e909d732355bf01732357d535009d", // 订单ID
                "orderNo": "E00007231", // 订单号
                "vesselName": "COSCO YANTIAN", // 船名
                "voyageNo": "020", // 航次
                "porCityName": "Shekou",// 起始地
                "fndCityName": "Durban", // 目的地
                "orderTransferResult": { // 转运服务
                    "transferLoadingCity": null, // 装港转运
                    "transferDisChargeCity": null, // 卸港转运
                    "trailerLoadingCity": null, // 装港拖车
                    "trailerDisChargeCity": null // 卸港拖车
                },
                "etd": "2020-08-04 00:00", // ETD
                "accountType": "集运", // 账户类型
                "paymentStatus": "UNPAID", // 订单支付状态
                "orderStatus": "CANCELED", // 订单状态
                "paymentType": "ALL_ONLINE", // 订单支付类型
                "offlineCharges": null, // 线下金额
                "onlineCharges": { // 线上金额
                    "ORIGINAL": {
                        "onlineTotalAmount": 7443.37,// 线上支付总金额
                        "onlinePaidAmount": 0, // 线上支付已支付金额
                        "onlineUnpaidAmount": 7443.37, // 线上支付未支付金额
                        "minimumUnpaidAmount": 7443.37, // 分期支付首付款未付金额
                        "balanceUnpaidAmount": 0.00, // 未付余额
                        "currencyType": "CNY", // 币种
                        "deadFreightAmount": 0, // 履约保证金金额
                        "remissionAmount": 0 // 减免金额
                    }
                },
                "unpaidExtraCharge": 0, // 未支付附加费
                "effectiveStartDate": "2020-07-05T00:00:00.000Z", // 有效期从
                "effectiveEndDate": "2020-12-23T23:59:59.000Z", // 有效期至
                "orderUser": "testuser", // 下单人
                "updateTime": "2020-07-07T09:00:01.692Z", // 更新时间
                "bookable": true, // 是否可订舱
                "direction": "W", // 航向
                "sailingProdType": "I",// 产品类型
                "brNoInfos": [ // 订舱号信息
                    {
                        "isBrNoInternal": true, // 是否为平台的订舱号
                        "brNo": "6889903730" // 订舱号
                    }
                ],
                "orderTime": "2020-07-06T08:57:05.460Z", // 下单时间
                "allowChangeOrder": false, // 是否允许改单
                "hasProcessingOrderChangeReq": false, // 是否已申请改单
                "paidCharge": 0, // 已支付金额
                "orderContainerSummaryDTOList": [ // 箱子信息
                    {
                        "cntrType": "20GP" , // 箱型
                        "avaCount": 1, // 可退舱箱数
                        "validTotalCount": 1, // 有效总箱数
                        "bookedCount": 0, // 已订舱箱数
                        "returningCount": 0 // 退单箱数
                    }
                ]
            }
        ],
        "totalElements": 1, // 符合查询条件的总数据量
        "totalPages": 1, // 符合查询条件的总页数
        "last": true, // 是否为最后一页
        "size": 20, // 当前的条数
    }
}
```

## 1.6 异常示例

```javascript
{
    "code": "20000",
    "message": "无法识别用户，请联系客服"
}
```



# 2. 订单详情

按订单号查询订单的详细信息

## 2.1 地址和方法

- **路径**： "/service/synconhub/product/instantBooking/detail/{orderNo}"
- **方法**：GET

## 2.2 路径参数

| 参数名  |   示例    |         说明         |
| :-----: | :-------: | :------------------: |
| orderNo | E00144631 | 即刻订舱产品的订单号 |

## 2.3 请求样例

```javascript
GET /service/synconhub/product/instantBooking/detail/E00144631
```

## 2.4 响应参数

| 字段名  | 含义         |
| ------- | ------------ |
| code    | 状态码       |
| message | 提示信息     |
| data    | 订单详细信息 |

## 2.5 响应字段说明

```javascript
{
    "code": 0,
    "message": "",
    "data": {
        "orderId": "297e909d732355bf01732357d535009d", // 订单id
        "orderNo": "E00007231", // 订单号
        "orderStatus": "CANCELED", // 订单状态，
        "paymentStatus": "UNPAID", // 订单支付状态
        "orderTime": "2020-07-06T08:57:05.460Z", // 订单创建时间
        "onlineTotalCharge": 7443.37, // 订单线上支付金额
        "paidCharge": 0, // 订单已付金额
        "unpaidCharge": 7443.37, // 订单未付金额
        "paidDeadFreight": 0, // 已支付履约保证金金额
        "unpaidDeadFreight": 0, // 未支付履约保证金金额
        "paidExtraCharge": 0, // 已支付附加费
        "unpaidExtraCharge": 0, // 未支付附加费
        "offlineCharges": {// 订单线下支付金额
            "ORIGINAL":[ // 费用类型：ORIGINAL订单金额，EXTRA_CHARGE补差价，REFUND退款，WITHDRAW_COMMISSION履约保证金
                {
                    "currencyType": "CNY", // 币种
                    "charge": 1622.17,  // 金额
                    "deadFreightAmount": 0, // 履约保证金金额
                    "remissionAmount": 0 // 减免金额
                }
            ]
        }, 
        "sailingProduct": {...}, // 产品详细信息，具体结构参考《根据产品id查询即刻订舱产品的详细信息》
        "orderContainerSummaries": [ // 箱子信息
            {
                "cntrType": "20GP", // 箱型
                "avaCount": 1, // 可退舱箱数
                "validTotalCount": 2, // 有效总箱数
                "bookedCount": 1, // 已订舱箱数
                "returningCount": 0 // 退箱中的数量
            }
        ],
        "bookingContainers": [
            {
                "bookingNo": "6889903730", // 订舱号
                "status": "Confirmed", // 订舱状态
                "cntrType": "20GP", // 订舱箱型
                "count": 1 // 箱型数量
            }
        ], // 订舱号信息
        "allowChangeOrder": false, // 是否允许改单
        "hasProcessingOrderChangeReq": false, // 是否已申请改单
        "sailingProdType": "I", // 产品类型 ， I:Instant Booking（即可订舱产品）
        "orderPaymentType": "ALL_ONLINE" // 订单支付类型， ALL_ONLINE，ALL_OFFLINE，PART_ONLINE_PART_OFFLINE
    }
}
```

## 2.6 异常示例

```javascript
{
    "code": "20006",
    "message": "订单不存在"
}
```
